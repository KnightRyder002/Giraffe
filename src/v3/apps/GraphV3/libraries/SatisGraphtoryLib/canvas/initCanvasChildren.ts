import { Viewport } from 'pixi-viewport';
import deserializeGraphObjects from 'v3/apps/GraphV3/libraries/SatisGraphtoryLib/core/api/serialization/deserialize';
import ExternalInteractionManager from 'v3/apps/GraphV3/libraries/SatisGraphtoryLib/canvas/objects/interfaces/ExternalInteractionManager';
import {
  generateBuildingEnums,
  generateItemEnums,
  generateRecipeEnums,
} from 'tools/generateRelease';

const initCanvasChildren = (
  pixiJS: PIXI.Application,
  viewport: Viewport,
  translate: (source: string) => string,
  externalInteractionManager: ExternalInteractionManager
) => {
  // TODO: Get this from external sources

  const urlParams = new URLSearchParams(window.location.search);

  let data;

  if (urlParams.get('useBlank')) {
    data = {
      d: 'AIACA===',
      c: 0,
      v: '0.1.0',
    };
  } else {
    data = {
      d:
        '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',
      c: 1,
      v: '0.1.0',
    };
  }

  console.time('loadNodes');
  const children = deserializeGraphObjects(
    data,
    translate,
    externalInteractionManager
  );
  console.timeEnd('loadNodes');

  console.log(generateBuildingEnums());
  console.log(generateItemEnums());
  console.log(generateRecipeEnums());

  return children;
};

export default initCanvasChildren;
