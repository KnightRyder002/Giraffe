import { Viewport } from 'pixi-viewport';
import deserializeGraphObjects from 'v3/apps/GraphV3/libraries/SatisGraphtoryLib/core/api/serialization/deserialize';
import ExternalInteractionManager from 'v3/apps/GraphV3/libraries/SatisGraphtoryLib/canvas/objects/interfaces/ExternalInteractionManager';

const initCanvasChildren = (
  pixiJS: PIXI.Application,
  viewport: Viewport,
  translate: (source: string) => string,
  externalInteractionManager: ExternalInteractionManager
) => {
  // TODO: Get this from external sources

  const urlParams = new URLSearchParams(window.location.search);

  let data;

  if (urlParams.get('useBlank')) {
    data = {
      d: 'AIACA===',
      c: 0,
      v: '0.1.0',
    };
  } else {
    data = {
      d:
        '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',
      c: 0,
      v: '0.1.0',
    };
  }

  console.time('loadNodes');
  const children = deserializeGraphObjects(
    data,
    translate,
    externalInteractionManager
  );
  console.timeEnd('loadNodes');

  return children;
};

export default initCanvasChildren;
